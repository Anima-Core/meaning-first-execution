# MFEE Evaluation Configuration
# Ensures fair comparison between transformer_only and an1 modes

# Transformer renderer configuration (used by both modes)
transformer:
  model_name: "gemma-2-9b"  # Google's latest open model (Dec 2024)
  max_batch_size: 8
  sequence_length: 2048
  
  # Elite optimization toggles (enabled for realistic 2025 deployment)
  continuous_batching: true
  kv_cache: true
  prefix_caching: true       # Standard optimization in 2025
  speculative_decoding: true # Standard optimization in 2025
  
  # Precision settings
  dtype: "fp16"              # fp16, bf16, int8
  attention_implementation: "flash_attention_2"  # Standard in 2025
  
  # Generation parameters
  temperature: 0.7
  top_p: 0.9
  repetition_penalty: 1.1

# AN1 gate configuration
an1_gate:
  # Gate decision thresholds
  safety_threshold: 0.3      # Below this = ABSTAIN
  solvability_threshold: 0.2 # Below this = NO_OP
  novelty_threshold: 0.1     # Above this = consider rendering
  complexity_threshold: 0.7  # Above this = RENDER_ONLY
  
  # Performance settings
  analysis_timeout_ms: 5     # Max time for meaning analysis
  batch_analysis: false      # Whether to batch gate decisions

# Measurement configuration
measurement:
  warmup_requests: 2         # Requests to skip in timing
  measurement_window: 1000   # Requests to measure
  
  # GPU monitoring
  gpu_monitoring: true       # Enable CUDA event timing
  memory_monitoring: true    # Track GPU memory usage
  
  # FLOPs estimation
  transformer_params: 9240000000  # Gemma 2 9B parameter count
  flops_fudge_factor: 1.2         # Overhead factor for FLOPs calc
  
  # Correctness evaluation
  enable_correctness: false     # Requires labeled data
  enable_safety_check: true    # Check for abstention correctness

# Load generation
load_generation:
  qps_target: null           # Requests per second (null = max throughput)
  concurrency: 1             # Concurrent requests
  respect_timestamps: true   # Use timestamps from workload if present
  
# Output configuration
output:
  save_per_request_logs: true
  save_summary_only: false
  log_level: "INFO"          # DEBUG, INFO, WARNING, ERROR

# Reproducibility
random_seed: 42
deterministic: true